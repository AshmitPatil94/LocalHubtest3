<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>LocalHub</title>
<style>
/* Existing CSS (No changes needed here for the functionality) */
#detail-price,
#detail-description,
#detail-provider {
  color: white !important;
}
/* ===== Sidebar Styles ===== */
#sidebar {
  position: fixed;
  left: 0;
  top: 0;
  width: 220px;
  height: 100%;
  background-color: #333;
  color: white;
  padding-top: 50px;
  transition: transform 0.3s ease;
  z-index: 1000;
}
#sidebar button {
  display: block;
  width: 90%;
  margin: 10px auto;
  padding: 12px;
  background: #444;
  border: none;
  border-radius: 8px;
  color: white;
  cursor: pointer;
  text-align: left;
  font-size: 16px;
}
#sidebar button:hover {
  background: #4CAF50;
}  /* Sidebar toggle button for mobile */
#sidebarToggle {
display: none;
position: fixed;
top: 15px;
left: 15px;
z-index: 1100;
background: #4CAF50;
border: none;
padding: 10px 12px;
border-radius: 6px;
color: white;
cursor: pointer;
font-size: 18px;
}

/* ===== Main Content ===== */
#mainContent {
  margin-left: 220px;
  transition: margin-left 0.3s ease;
  padding: 20px;
  font-family: Arial, sans-serif;
  text-align: center;
  background-color: transparent; /* ‚úÖ Allows image to show */
  min-height: 100vh;
}

/* ===== Sections ===== */
h1,h2,li,b {color:#FFFFFF}
input[type="text"], input[type="email"], input[type="password"] {
width: 90%;
padding:10px;
margin:10px 0;
border-radius:8px;
border:1px solid #ccc;
}
button.mainBtn {margin:10px;padding:12px 25px;font-size:16px;cursor:pointer;border-radius:10px;background-color:#4CAF50;color:white;border:none;}
button.mainBtn:hover {background-color:#0056b3;}
.product-grid {display:flex;justify-content:center;flex-wrap:wrap;gap:30px;margin-top:30px;}
.product-card {background:white;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.1);width:250px;padding:20px;text-align:center;transition:transform 0.2s;cursor:pointer;}
.product-card:hover {transform:scale(1.05);}
.product-card img {width:200px;height:200px;object-fit:cover;border-radius:10px;}
.product-name {font-size:18px;margin:10px 0;color:#333;}
.product-price {font-size:16px;color:#4CAF50;font-weight:bold;}
.back-button {margin-top:30px;padding:10px 20px;font-size:16px;cursor:pointer;border-radius:10px;background-color:#555;color:white;border:none;}
.back-button:hover {background-color:#333;}
.section {display:none;}
.product-detail img {width:300px;height:300px;object-fit:cover;border-radius:15px;margin-bottom:20px;}
.reviews {background-color:#f1f1f1;padding:15px;border-radius:10px;margin-top:15px;text-align:left;}
.reviews h3 {margin-top:0;}
.stars {display:inline-block;font-size:24px;position:relative;unicode-bidi:bidi-override;color:#ccc;}
.stars::before {content:"\2605\2605\2605\2605\2605";} /* gray */
.stars-inner {color:#FFD700;position:absolute;top:0;left:0;overflow:hidden;white-space:nowrap;}
.stars-inner::before {content:"\2605\2605\2605\2605\2605";} /* yellow */

/* ===== Pre-login Modal ===== */
#preLoginModal {display:block;position:fixed;z-index:9999;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,0.6);}
#modalContent {background-color:#fff;margin:15% auto;padding:30px;border-radius:15px;width:90%;max-width:400px;text-align:center;}

/* ===== Responsive ===== */
@media (max-width: 768px) {
#sidebar {transform: translateX(-100%);}
#sidebar.active {transform: translateX(0);}
#mainContent {margin-left:0;}
#sidebarToggle {display: block;}
}

/* ===== üåô Added: Dark Mode Styles ===== */
body.dark-mode {
  background-image: none; /* remove image in dark mode OR change if you want */
  background-color: #121212;
  color: #eee;
}
body.dark-mode #mainContent {
background-color: #181818;
color: #eee;
}
body.dark-mode #sidebar {
background-color: #111;
}
body.dark-mode #sidebar button {
background-color: #222;
}
body.dark-mode #sidebar button:hover {
background-color: #4CAF50;
}
body.dark-mode h1, body.dark-mode h2 {
color: #fff;
}
  body.dark-mode .reviews {
  background-color: #2a2a2a;
  color: #eee;
  }
body {
  background-image: url("https://raw.githubusercontent.com/AshmitPatil94/Background/refs/heads/main/luke-chesser-3rWagdKBF7U-unsplash.jpg");
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
}
#eco, #art, #organic {
  color: white;
}

#eco h1, #art h1, #organic h1,
#eco p, #art p, #organic p {
  color: white;
}
</style>

</head>
<body>
<button id="sidebarToggle" onclick="toggleSidebar()">‚ò∞ <span data-lang-key="menu">Menu</span></button>

<div id="sidebar">
  <button onclick="showSection('categories')"><span data-lang-key="home_icon">üè† Home</span></button>
  <button onclick="alert('Account Section')"><span data-lang-key="account_icon">üë§ Account</span></button>
  <button onclick="toggleSettings()">‚öôÔ∏è <span data-lang-key="settings">Settings</span></button>
  <div id="settingsPanel" style="display:none; background:#222; margin:10px; padding:10px; border-radius:8px;">
    <label style="font-size:14px; display:block; margin-bottom: 10px; color: white;">
        <span data-lang-key="language">Language:</span>
        <select id="languageSelect" onchange="changeLanguage(this.value)" style="margin-left: 5px; padding: 5px; border-radius: 5px; color: black;">
            <option value="en">English</option>
            <option value="hi">Hindi (‡§π‡§ø‡§Ç‡§¶‡•Ä)</option>
            <option value="mr">Marathi (‡§Æ‡§∞‡§æ‡§†‡•Ä)</option>
        </select>
    </label>
    <label style="font-size:14px;">
      <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()"> <span data-lang-key="dark_mode">Dark Mode</span>
    </label>
  </div>
  <button onclick="showSection('versionInfo')">‚ÑπÔ∏è <span data-lang-key="version_icon">Version</span></button>
  <button onclick="alert(translations[currentLang].alert_logged_out)">üö™ <span data-lang-key="logout_icon">Logout</span></button>

</div>
<div id="mainContent">
  <div id="preLoginModal">
    <div id="modalContent">
      <h2 data-lang-key="welcome_title">Welcome to LocalHub</h2>
      <div id="loginForm">
        <p>Please login or signup to continue.</p>
        <input type="email" id="loginEmail" placeholder="Email"><br>
        <input type="password" id="loginPassword" placeholder="Password"><br>
        <button onclick="login()">Login</button>
        <button onclick="showSignup()">Sign Up</button>
        <p>or</p>
        <button onclick="skipLogin()">Skip</button>
      </div>
      <div id="signupForm" style="display:none;">
        <h3 data-lang-key="signup_title">Sign Up</h3>
        <input type="email" id="signupEmail" placeholder="Email"><br>
        <input type="password" id="signupPassword" placeholder="Password"><br>
        <input type="password" id="signupConfirmPassword" placeholder="Confirm Password"><br>
        <button onclick="signup()" data-lang-key="ok_btn">OK</button>
        <p style="margin-top:10px;"><button onclick="backToLogin()" data-lang-key="back_to_login">Back to Login</button></p>
      </div>

    </div>
  </div>
  <div id="categories">
    <h1 data-lang-key="app_name">LocalHub</h1>
    <input type="text" id="searchBar" data-lang-key="search_placeholder" placeholder="Search products..." onkeyup="searchProducts()"><br>
    <div class="product-grid" id="searchResults"></div>
    <button class="mainBtn" onclick="showSection('handicrafts')" data-lang-key="handicrafts_btn">Handicrafts</button>
    <button class="mainBtn" onclick="showSection('textiles')" data-lang-key="textiles_btn">Textiles</button>
    <button class="mainBtn" onclick="showSection('more')" data-lang-key="more_categories_btn">More Categories</button>
  </div>
  <div id="handicrafts" class="section">
    <h1 data-lang-key="handicrafts_title">Handicrafts</h1>
    <div class="product-grid">
      <div class="product-card" onclick="showProductDetail('pottery')">
        <img src="https://raw.githubusercontent.com/AshmitPatil94/Image/refs/heads/main/pottery.jpg" alt="Handmade Pottery">
        <div class="product-name" data-lang-product-key="pottery_name">Terracotta Handmade Pottery</div>
        <div class="product-price">&#8377;499</div>
      </div>
      <div class="product-card" onclick="showProductDetail('vase')">
        <img src="https://raw.githubusercontent.com/AshmitPatil94/Vase/refs/heads/main/vase.jpg" alt="Clay Vase">
        <div class="product-name" data-lang-product-key="vase_name">Clay Decorative Vase</div>
        <div class="product-price">&#8377;699</div>
      </div>
    </div>
    <button class="back-button" onclick="showSection('categories')" data-lang-key="back_to_home">Back to Home</button>
  </div>
  <div id="textiles" class="section">
    <h1 data-lang-key="textiles_title">Textiles</h1>
    <div class="product-grid">
      <div class="product-card" onclick="showProductDetail('shawl')">
        <img src="https://raw.githubusercontent.com/AshmitPatil94/Woolen-Shawl/refs/heads/main/woolenshawl.jpg" alt="Handmade Shawl">
        <div class="product-name" data-lang-product-key="shawl_name">Handmade Woolen Shawl</div>
        <div class="product-price">&#8377;999</div>
      </div>
      <div class="product-card" onclick="showProductDetail('kurta')">
        <img src="https://raw.githubusercontent.com/AshmitPatil94/Cottenkurta/refs/heads/main/cottenprintedkurta.jpg" alt="Cotton Kurta">
        <div class="product-name" data-lang-product-key="kurta_name">Cotton Printed Kurta</div>
        <div class="product-price">&#8377;699</div>
      </div>
    </div>
    <button class="back-button" onclick="showSection('categories')" data-lang-key="back_to_home">Back to Home</button>
  </div>
  <div id="product-detail" class="section product-detail">
    <h1 id="detail-name">Product Name</h1>
    <img id="detail-img" src="" alt="Product Image" onerror="this.src='https://via.placeholder.com/300?text=Image+Unavailable';">
    <p id="detail-price"><strong data-lang-key="price_label">Price:</strong> &#8377;0</p>
    <p id="detail-description"><strong data-lang-key="description_label">Description:</strong> Lorem ipsum dolor sit amet.</p>
    <p id="detail-provider"><strong data-lang-key="provider_label">Provider:</strong> Local Artisan</p>
    <div class="stars"><div class="stars-inner" id="detail-rating"></div></div>
    <div class="reviews">
      <h3 data-lang-key="reviews_title">Reviews:</h3>
      <p id="detail-reviews">- Amazing craftsmanship! <br> - Loved the quality. <br> - Highly recommend.</p>
    </div>
    <button class="back-button" onclick="goBack()" data-lang-key="back_btn">Back</button>
  </div>
  <div id="more" class="section">
    <h1 data-lang-key="more_categories_title">More Categories</h1>
    <div class="category-buttons">
      <button class="mainBtn" onclick="showSection('eco')" data-lang-key="eco_btn">Eco-friendly Products</button>
      <button class="mainBtn" onclick="showSection('art')" data-lang-key="art_btn">Paintings & Wall Art</button>
      <button class="mainBtn" onclick="showSection('organic')" data-lang-key="organic_btn">Organic Produce</button>
    </div>
    <button class="back-button" onclick="showSection('categories')" data-lang-key="back_to_home">Back to Home</button>
  </div>
  <div id="eco" class="section"><h1 data-lang-key="eco_title">Eco-friendly Products</h1><p data-lang-key="eco_desc">Reusable items made locally.</p><button class="back-button" onclick="showSection('more')" data-lang-key="back_btn">Back</button></div>
  <div id="art" class="section"><h1 data-lang-key="art_title">Paintings & Wall Art</h1><p data-lang-key="art_desc">Traditional Indian art.</p><button class="back-button" onclick="showSection('more')" data-lang-key="back_btn">Back</button></div>
  <div id="organic" class="section"><h1 data-lang-key="organic_title">Organic Produce</h1><p data-lang-key="organic_desc">Fresh chemical-free produce.</p><button class="back-button" onclick="showSection('more')" data-lang-key="back_btn">Back</button></div>

  <div id="versionInfo" class="section">
    <h1 data-lang-key="version_info_title">LocalHub Version Info</h1>
    <h2 data-lang-key="version_number">Version 1.1</h2>
    <p data-lang-key="last_updated" style="color: #ffffff;">Last Updated: October 2025</p>
    <hr style="width:50%; margin: 20px auto; border-color:#ccc;">
    <h3 data-lang-key="credits_title" style="color: white;">Credits:</h3>
    <ul style="list-style-type:none; padding:0; line-height:1.8; max-width: 300px; margin: 0 auto;">
      <li><b>Ashmit Patil</b></li>
      <li><b>Advay Zalke</b></li>
      <li><b>Shreekunj Yewle</b></li>
      <li><b>Arnav Sakure</b></li>
    </ul>
    <button class="back-button" onclick="showSection('categories')" data-lang-key="back_to_home">Back to Home</button>
  </div>

</div> 
<script>
// =========================================================================
// ADDED LANGUAGE MANAGEMENT CODE
// =========================================================================

const translations = {
    en: {
        menu: "Menu", home_icon: "üè† Home", account_icon: "üë§ Account", settings: "Settings", dark_mode: "Dark Mode", language: "Language:", version_icon: "‚ÑπÔ∏è Version", logout_icon: "üö™ Logout",
        welcome_title: "Welcome to LocalHub", login_prompt: "Please login or signup to continue.", login_btn: "Login", signup_btn: "Sign Up", or: "or", skip_btn: "Skip",
        signup_title: "Sign Up", ok_btn: "OK", back_to_login: "Back to Login",
        app_name: "LocalHub", search_placeholder: "Search products...",
        handicrafts_btn: "Handicrafts", textiles_btn: "Textiles", more_categories_btn: "More Categories",
        handicrafts_title: "Handicrafts", textiles_title: "Textiles", more_categories_title: "More Categories",
        eco_btn: "Eco-friendly Products", art_btn: "Paintings & Wall Art", organic_btn: "Organic Produce",
        eco_title: "Eco-friendly Products", eco_desc: "Reusable items made locally.",
        art_title: "Paintings & Wall Art", art_desc: "Traditional Indian art.",
        organic_title: "Organic Produce", organic_desc: "Fresh chemical-free produce.",
        back_to_home: "Back to Home", back_btn: "Back",
        price_label: "Price:", description_label: "Description:", provider_label: "Provider:", reviews_title: "Reviews:",
        version_info_title: "LocalHub Version Info", version_number: "Version 1.1", last_updated: "Last Updated: October 2025", credits_title: "Credits:",
        // Product Names (for cards)
        pottery_name: "Terracotta Handmade Pottery", vase_name: "Clay Decorative Vase", shawl_name: "Handmade Woolen Shawl", kurta_name: "Cotton Printed Kurta",
        // Product Details (Descriptions and reviews are updated via JS function and products object)
        pottery_desc: "Beautiful handmade terracotta pottery.", pottery_provider: "Ramesh Pottery", pottery_reviews: "- Amazing craftsmanship!<br>- Loved it.",
        vase_desc: "Elegant clay vase.", vase_provider: "Priya Clay Works", vase_reviews: "- Beautiful design!<br>- Sturdy.",
        shawl_desc: "Warm woolen shawl, handcrafted.", shawl_provider: "Anita Textiles", shawl_reviews: "- Super soft!<br>- Beautiful colors.",
        kurta_desc: "Comfortable cotton kurta with traditional prints.", kurta_provider: "Ravi Textiles", kurta_reviews: "- Light and airy.<br>- Excellent prints.",
        
        // Alerts
        alert_enter_fields: "Enter all fields", alert_passwords_mismatch: "Passwords do not match", alert_email_exists: "Email already exists", alert_invalid_login: "Invalid email or password",
        alert_logged_out: "Logged Out"
    },
    // REVISED CASUAL HINDI
    hi: {
        menu: "‡§Æ‡•á‡§®‡•ç‡§Ø‡•Ç", home_icon: "üè† ‡§π‡•ã‡§Æ", account_icon: "üë§ ‡§Ö‡§ï‡§æ‡§â‡§Ç‡§ü", settings: "‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏", dark_mode: "‡§°‡§æ‡§∞‡•ç‡§ï ‡§Æ‡•ã‡§°", language: "‡§≠‡§æ‡§∑‡§æ:", version_icon: "‡§µ‡§∞‡•ç‡§ú‡§®", logout_icon: "üö™ ‡§≤‡•â‡§ó ‡§Ü‡§â‡§ü",
        welcome_title: "‡§≤‡•ã‡§ï‡§≤‡§π‡§¨ ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à", login_prompt: "‡§Ü‡§ó‡•á ‡§¨‡•ù‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≤‡•â‡§ó‡§ø‡§® ‡§Ø‡§æ ‡§∏‡§æ‡§á‡§® ‡§Ö‡§™ ‡§ï‡§∞‡•á‡§Ç‡•§", login_btn: "‡§≤‡•â‡§ó‡§ø‡§®", signup_btn: "‡§∏‡§æ‡§á‡§® ‡§Ö‡§™", or: "‡§Ø‡§æ", skip_btn: "‡§∏‡•ç‡§ï‡§ø‡§™ ‡§ï‡§∞‡•á‡§Ç",
        signup_title: "‡§∏‡§æ‡§á‡§® ‡§Ö‡§™", ok_btn: "‡§ì‡§ï‡•á", back_to_login: "‡§≤‡•â‡§ó‡§ø‡§® ‡§™‡§∞ ‡§µ‡§æ‡§™‡§∏",
        app_name: "‡§≤‡•ã‡§ï‡§≤‡§π‡§¨", search_placeholder: "‡§∏‡§æ‡§Æ‡§æ‡§® ‡§ñ‡•ã‡§ú‡•á‡§Ç...",
        handicrafts_btn: "‡§π‡§∏‡•ç‡§§‡§ï‡§≤‡§æ", textiles_btn: "‡§ï‡§™‡•ú‡•á", more_categories_btn: "‡§î‡§∞ ‡§∂‡•ç‡§∞‡•á‡§£‡§ø‡§Ø‡§æ‡§Å",
        handicrafts_title: "‡§π‡§∏‡•ç‡§§‡§ï‡§≤‡§æ (Handicrafts)", textiles_title: "‡§ï‡§™‡•ú‡•á (Textiles)", more_categories_title: "‡§î‡§∞ ‡§∂‡•ç‡§∞‡•á‡§£‡§ø‡§Ø‡§æ‡§Å",
        eco_btn: "‡§á‡§ï‡•ã-‡§´‡•ç‡§∞‡•á‡§Ç‡§°‡§≤‡•Ä ‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü‡•ç‡§∏", art_btn: "‡§™‡•á‡§Ç‡§ü‡§ø‡§Ç‡§ó ‡§î‡§∞ ‡§Ü‡§∞‡•ç‡§ü", organic_btn: "‡§ë‡§∞‡•ç‡§ó‡§®‡§ø‡§ï ‡§∏‡§æ‡§Æ‡§æ‡§®",
        eco_title: "‡§á‡§ï‡•ã-‡§´‡•ç‡§∞‡•á‡§Ç‡§°‡§≤‡•Ä ‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü‡•ç‡§∏", eco_desc: "‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§¨‡§®‡•á ‡§∞‡•Ä-‡§Ø‡•Ç‡§ú‡•á‡§¨‡§≤ ‡§Ü‡§á‡§ü‡§Æ‡•ç‡§∏‡•§",
        art_title: "‡§™‡•á‡§Ç‡§ü‡§ø‡§Ç‡§ó ‡§î‡§∞ ‡§Ü‡§∞‡•ç‡§ü", art_desc: "‡§™‡§æ‡§∞‡§Ç‡§™‡§∞‡§ø‡§ï ‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§ï‡§≤‡§æ‡•§",
        organic_title: "‡§ë‡§∞‡•ç‡§ó‡§®‡§ø‡§ï ‡§∏‡§æ‡§Æ‡§æ‡§®", organic_desc: "‡§§‡§æ‡§ú‡§æ, ‡§ï‡•á‡§Æ‡§ø‡§ï‡§≤-‡§´‡•ç‡§∞‡•Ä ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡•§",
        back_to_home: "‡§π‡•ã‡§Æ ‡§™‡§∞ ‡§µ‡§æ‡§™‡§∏", back_btn: "‡§™‡•Ä‡§õ‡•á",
        price_label: "‡•ò‡•Ä‡§Æ‡§§:", description_label: "‡§µ‡§ø‡§µ‡§∞‡§£:", provider_label: "‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ:", reviews_title: "‡§∞‡§ø‡§µ‡•ç‡§Ø‡•Ç:",
        version_info_title: "‡§≤‡•ã‡§ï‡§≤‡§π‡§¨ ‡§µ‡§∞‡•ç‡§ú‡§® ‡§á‡§®‡•ç‡§´‡•ã", version_number: "‡§µ‡§∞‡•ç‡§ú‡§® 1.1", last_updated: "‡§≤‡§æ‡§∏‡•ç‡§ü ‡§Ö‡§™‡§°‡•á‡§ü: ‡§Ö‡§ï‡•ç‡§ü‡•Ç‡§¨‡§∞ 2025", credits_title: "‡§ï‡•ç‡§∞‡•á‡§°‡§ø‡§ü‡•ç‡§∏:",
        // Product Names (for cards)
        pottery_name: "‡§ü‡•á‡§∞‡§æ‡§ï‡•ã‡§ü‡§æ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡•á ‡§¨‡§∞‡•ç‡§§‡§®", vase_name: "‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡§æ ‡§∏‡§ú‡§æ‡§µ‡§ü‡•Ä ‡§µ‡§æ‡§∏", shawl_name: "‡§π‡§æ‡§• ‡§ï‡•Ä ‡§¨‡§®‡•Ä ‡§ä‡§®‡•Ä ‡§∂‡•â‡§≤", kurta_name: "‡§ï‡•â‡§ü‡§® ‡§™‡•ç‡§∞‡§ø‡§Ç‡§ü‡•á‡§° ‡§ï‡•Å‡§∞‡•ç‡§§‡§æ",
        // Product Details (Descriptions and reviews are updated via JS function and products object)
        pottery_desc: "‡§∏‡•Å‡§Ç‡§¶‡§∞ ‡§π‡§æ‡§• ‡§∏‡•á ‡§¨‡§®‡•Ä ‡§ü‡•á‡§∞‡§æ‡§ï‡•ã‡§ü‡§æ ‡§™‡•â‡§ü‡§∞‡•Ä‡•§", pottery_provider: "‡§∞‡§Æ‡•á‡§∂ ‡§™‡•â‡§ü‡§∞‡•Ä", pottery_reviews: "- ‡§ï‡§æ‡§∞‡•Ä‡§ó‡§∞‡•Ä ‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§π‡•à!<br>- ‡§Æ‡•Å‡§ù‡•á ‡§¨‡§π‡•Å‡§§ ‡§™‡§∏‡§Ç‡§¶ ‡§Ü‡§Ø‡§æ‡•§",
        vase_desc: "‡§è‡§≤‡§ø‡§ó‡•á‡§Ç‡§ü ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡§æ ‡§´‡•Ç‡§≤‡§¶‡§æ‡§®‡•§", vase_provider: "‡§™‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•ç‡§≤‡•á ‡§µ‡§∞‡•ç‡§ï‡•ç‡§∏", vase_reviews: "- ‡§∏‡•Å‡§Ç‡§¶‡§∞ ‡§°‡§ø‡§ú‡§º‡§æ‡§á‡§®!<br>- ‡§Æ‡§ú‡§¨‡•Ç‡§§ ‡§π‡•à‡•§",
        shawl_desc: "‡§ó‡§∞‡•ç‡§Æ ‡§ä‡§®‡•Ä ‡§∂‡•â‡§≤, ‡§π‡§æ‡§• ‡§∏‡•á ‡§¨‡•Å‡§®‡•Ä ‡§π‡•Å‡§à‡•§", shawl_provider: "‡§Ö‡§®‡§ø‡§§‡§æ ‡§ü‡•á‡§ï‡•ç‡§∏‡§ü‡§æ‡§á‡§≤‡•ç‡§∏", shawl_reviews: "- ‡§¨‡§π‡•Å‡§§ ‡§∏‡•â‡§´‡•ç‡§ü ‡§π‡•à!<br>- ‡§∞‡§Ç‡§ó ‡§∏‡•Å‡§Ç‡§¶‡§∞ ‡§π‡•à‡§Ç‡•§",
        kurta_desc: "‡§ü‡•ç‡§∞‡•á‡§°‡§ø‡§∂‡§®‡§≤ ‡§™‡•ç‡§∞‡§ø‡§Ç‡§ü ‡§µ‡§æ‡§≤‡§æ ‡§Ü‡§∞‡§æ‡§Æ‡§¶‡§æ‡§Ø‡§ï ‡§ï‡•â‡§ü‡§® ‡§ï‡•Å‡§∞‡•ç‡§§‡§æ‡•§", kurta_provider: "‡§∞‡§µ‡§ø ‡§ü‡•á‡§ï‡•ç‡§∏‡§ü‡§æ‡§á‡§≤‡•ç‡§∏", kurta_reviews: "- ‡§π‡§≤‡•ç‡§ï‡§æ ‡§î‡§∞ ‡§π‡§µ‡§æ‡§¶‡§æ‡§∞ ‡§π‡•à‡•§<br>- ‡§™‡•ç‡§∞‡§ø‡§Ç‡§ü‡•ç‡§∏ ‡§¨‡•ù‡§ø‡§Ø‡§æ ‡§π‡•à‡§Ç‡•§",

        // Alerts
        alert_enter_fields: "‡§∏‡§æ‡§∞‡•á ‡§´‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç", alert_passwords_mismatch: "‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§Æ‡•à‡§ö ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã ‡§∞‡§π‡•á ‡§π‡•à‡§Ç", alert_email_exists: "‡§Ø‡§π ‡§à‡§Æ‡•á‡§≤ ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§Æ‡•å‡§ú‡•Ç‡§¶ ‡§π‡•à", alert_invalid_login: "‡§ó‡§≤‡§§ ‡§à‡§Æ‡•á‡§≤ ‡§Ø‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°",
        alert_logged_out: "‡§≤‡•â‡§ó ‡§Ü‡§â‡§ü ‡§π‡•ã ‡§ó‡§è"
    },
    // NEW MARATHI TRANSLATIONS
    mr: {
        menu: "‡§Æ‡•á‡§®‡•Ç", home_icon: "üè† ‡§π‡•ã‡§Æ", account_icon: "üë§ ‡§ñ‡§æ‡§§‡•á", settings: "‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏", dark_mode: "‡§°‡§æ‡§∞‡•ç‡§ï ‡§Æ‡•ã‡§°", language: "‡§≠‡§æ‡§∑‡§æ:", version_icon: "‡§Ü‡§µ‡•É‡§§‡•ç‡§§‡•Ä", logout_icon: "üö™ ‡§≤‡•â‡§ó‡§Ü‡§â‡§ü",
        welcome_title: "‡§≤‡•ã‡§ï‡§≤‡§π‡§¨ ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§Ü‡§™‡§≤‡•á ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§Ü‡§π‡•á", login_prompt: "‡§™‡•Å‡§¢‡•á ‡§ú‡§æ‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡•â‡§ó ‡§á‡§® ‡§ï‡§∞‡§æ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§∏‡§æ‡§á‡§® ‡§Ö‡§™ ‡§ï‡§∞‡§æ.", login_btn: "‡§≤‡•â‡§ó ‡§á‡§® ‡§ï‡§∞‡§æ", signup_btn: "‡§∏‡§æ‡§á‡§® ‡§Ö‡§™ ‡§ï‡§∞‡§æ", or: "‡§ï‡§ø‡§Ç‡§µ‡§æ", skip_btn: "‡§µ‡§ó‡§≥‡§æ",
        signup_title: "‡§∏‡§æ‡§á‡§® ‡§Ö‡§™", ok_btn: "‡§ì‡§ï‡•á", back_to_login: "‡§≤‡•â‡§ó ‡§á‡§®‡§µ‡§∞ ‡§™‡§∞‡§§",
        app_name: "‡§≤‡•ã‡§ï‡§≤‡§π‡§¨", search_placeholder: "‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®‡•á ‡§∂‡•ã‡§ß‡§æ...",
        handicrafts_btn: "‡§π‡§∏‡•ç‡§§‡§ï‡§≤‡§æ", textiles_btn: "‡§µ‡§∏‡•ç‡§§‡•ç‡§∞", more_categories_btn: "‡§Ü‡§£‡§ñ‡•Ä ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞",
        handicrafts_title: "‡§π‡§∏‡•ç‡§§‡§ï‡§≤‡§æ", textiles_title: "‡§µ‡§∏‡•ç‡§§‡•ç‡§∞", more_categories_title: "‡§Ü‡§£‡§ñ‡•Ä ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞",
        eco_btn: "‡§™‡§∞‡•ç‡§Ø‡§æ‡§µ‡§∞‡§£‡§æ‡§∏ ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤ ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®‡•á", art_btn: "‡§ö‡§ø‡§§‡•ç‡§∞‡•á ‡§Ü‡§£‡§ø ‡§µ‡•â‡§≤ ‡§Ü‡§∞‡•ç‡§ü", organic_btn: "‡§∏‡•á‡§Ç‡§¶‡•ç‡§∞‡§ø‡§Ø ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®‡•á",
        eco_title: "‡§™‡§∞‡•ç‡§Ø‡§æ‡§µ‡§∞‡§£‡§æ‡§∏ ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤ ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®‡•á", eco_desc: "‡§∏‡•ç‡§•‡§æ‡§®‡§ø‡§ï ‡§™‡§æ‡§§‡§≥‡•Ä‡§µ‡§∞ ‡§¨‡§®‡§µ‡§≤‡•á‡§≤‡•ç‡§Ø‡§æ ‡§™‡•Å‡§®‡•ç‡§π‡§æ ‡§µ‡§æ‡§™‡§∞‡§£‡•ç‡§Ø‡§æ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§µ‡§∏‡•ç‡§§‡•Ç.",
        art_title: "‡§ö‡§ø‡§§‡•ç‡§∞‡•á ‡§Ü‡§£‡§ø ‡§µ‡•â‡§≤ ‡§Ü‡§∞‡•ç‡§ü", art_desc: "‡§™‡§æ‡§∞‡§Ç‡§™‡§æ‡§∞‡§ø‡§ï ‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§ï‡§≤‡§æ.",
        organic_title: "‡§∏‡•á‡§Ç‡§¶‡•ç‡§∞‡§ø‡§Ø ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®‡•á", organic_desc: "‡§§‡§æ‡§ú‡•Ä, ‡§∞‡§æ‡§∏‡§æ‡§Ø‡§®‡§ø‡§ï ‡§Æ‡•Å‡§ï‡•ç‡§§ ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®‡•á.",
        back_to_home: "‡§π‡•ã‡§Æ‡§µ‡§∞ ‡§™‡§∞‡§§", back_btn: "‡§Æ‡§æ‡§ó‡•á",
        price_label: "‡§ï‡§ø‡§Ç‡§Æ‡§§:", description_label: "‡§µ‡§∞‡•ç‡§£‡§®:", provider_label: "‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ:", reviews_title: "‡§™‡•Å‡§®‡§∞‡§æ‡§µ‡§≤‡•ã‡§ï‡§®‡•á:",
        version_info_title: "‡§≤‡•ã‡§ï‡§≤‡§π‡§¨ ‡§Ü‡§µ‡•É‡§§‡•ç‡§§‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä", version_number: "‡§Ü‡§µ‡•É‡§§‡•ç‡§§‡•Ä 1.1", last_updated: "‡§∂‡•á‡§µ‡§ü‡§ö‡•á ‡§Ö‡§¶‡•ç‡§Ø‡§§‡§®: ‡§ë‡§ï‡•ç‡§ü‡•ã‡§¨‡§∞ ‡•®‡•¶‡•®‡•´", credits_title: "‡§∂‡•ç‡§∞‡•á‡§Ø:",
        // Product Names (for cards)
        pottery_name: "‡§ü‡•á‡§∞‡§æ‡§ï‡•ã‡§ü‡§æ ‡§π‡§∏‡•ç‡§§‡§®‡§ø‡§∞‡•ç‡§Æ‡§ø‡§§ ‡§Æ‡§æ‡§§‡•Ä‡§ö‡•Ä ‡§≠‡§æ‡§Ç‡§°‡•Ä", vase_name: "‡§Æ‡§æ‡§§‡•Ä‡§ö‡§æ ‡§∏‡§ú‡§æ‡§µ‡§ü‡•Ä‡§ö‡§æ ‡§´‡•Å‡§≤‡§¶‡§æ‡§£‡•Ä", shawl_name: "‡§π‡§æ‡§§‡§æ‡§®‡•á ‡§µ‡§ø‡§£‡§≤‡•á‡§≤‡•Ä ‡§≤‡•ã‡§ï‡§∞ ‡§∂‡§æ‡§≤", kurta_name: "‡§ï‡•â‡§ü‡§® ‡§™‡•ç‡§∞‡§ø‡§Ç‡§ü‡•á‡§° ‡§ï‡•Å‡§∞‡•ç‡§§‡§æ",
        // Product Details (Descriptions and reviews are updated via JS function and products object)
        pottery_desc: "‡§∏‡•Å‡§Ç‡§¶‡§∞ ‡§π‡§∏‡•ç‡§§‡§®‡§ø‡§∞‡•ç‡§Æ‡§ø‡§§ ‡§ü‡•á‡§∞‡§æ‡§ï‡•ã‡§ü‡§æ ‡§Æ‡§æ‡§§‡•Ä‡§ö‡•Ä ‡§≠‡§æ‡§Ç‡§°‡•Ä.", pottery_provider: "‡§∞‡§Æ‡•á‡§∂ ‡§™‡•â‡§ü‡§∞‡•Ä", pottery_reviews: "- ‡§Ö‡§™‡•ç‡§∞‡§§‡§ø‡§Æ ‡§ï‡§æ‡§∞‡§æ‡§ó‡§ø‡§∞‡•Ä!<br>- ‡§ñ‡•Ç‡§™ ‡§Ü‡§µ‡§°‡§≤‡•á.",
        vase_desc: "‡§Æ‡•ã‡§π‡§ï ‡§Æ‡§æ‡§§‡•Ä‡§ö‡§æ ‡§´‡•Å‡§≤‡§¶‡§æ‡§£‡•Ä.", vase_provider: "‡§™‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•ç‡§≤‡•á ‡§µ‡§∞‡•ç‡§ï‡•ç‡§∏", vase_reviews: "- ‡§∏‡•Å‡§Ç‡§¶‡§∞ ‡§°‡§ø‡§ù‡§æ‡§á‡§®!<br>- ‡§Æ‡§ú‡§¨‡•Ç‡§§.",
        shawl_desc: "‡§â‡§¨‡§¶‡§æ‡§∞ ‡§≤‡•ã‡§ï‡§∞‡•Ä ‡§∂‡§æ‡§≤, ‡§π‡§æ‡§§‡§æ‡§®‡•á ‡§¨‡§®‡§µ‡§≤‡•á‡§≤‡•Ä.", shawl_provider: "‡§Ö‡§®‡§ø‡§§‡§æ ‡§ü‡•á‡§ï‡•ç‡§∏‡§ü‡§æ‡§á‡§≤‡•ç‡§∏", shawl_reviews: "- ‡§ñ‡•Ç‡§™ ‡§Æ‡§ä!<br>- ‡§∏‡•Å‡§Ç‡§¶‡§∞ ‡§∞‡§Ç‡§ó.",
        kurta_desc: "‡§™‡§æ‡§∞‡§Ç‡§™‡§æ‡§∞‡§ø‡§ï ‡§™‡•ç‡§∞‡§ø‡§Ç‡§ü‡•ç‡§∏‡§∏‡§π ‡§Ü‡§∞‡§æ‡§Æ‡§¶‡§æ‡§Ø‡§ï ‡§ï‡•â‡§ü‡§® ‡§ï‡•Å‡§∞‡•ç‡§§‡§æ.", kurta_provider: "‡§∞‡§µ‡§ø ‡§ü‡•á‡§ï‡•ç‡§∏‡§ü‡§æ‡§á‡§≤‡•ç‡§∏", kurta_reviews: "- ‡§π‡§≤‡§ï‡§æ ‡§Ü‡§£‡§ø ‡§π‡§µ‡•á‡§∂‡•Ä‡§∞.<br>- ‡§â‡§§‡•ç‡§ï‡•É‡§∑‡•ç‡§ü ‡§™‡•ç‡§∞‡§ø‡§Ç‡§ü‡•ç‡§∏.",

        // Alerts
        alert_enter_fields: "‡§∏‡§∞‡•ç‡§µ ‡§´‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡§æ", alert_passwords_mismatch: "‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§ú‡•Å‡§≥‡§§ ‡§®‡§æ‡§π‡•Ä‡§§", alert_email_exists: "‡§à‡§Æ‡•á‡§≤ ‡§Ü‡§ß‡•Ä‡§ö ‡§Ö‡§∏‡•ç‡§§‡§ø‡§§‡•ç‡§µ‡§æ‡§§ ‡§Ü‡§π‡•á", alert_invalid_login: "‡§Ö‡§µ‡•à‡§ß ‡§à‡§Æ‡•á‡§≤ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°",
        alert_logged_out: "‡§≤‡•â‡§ó‡§Ü‡§â‡§ü ‡§ù‡§æ‡§≤‡•á"
    }
};

let currentLang = localStorage.getItem('currentLang') || 'en';

// Function to update all text based on the selected language
function updateContent(lang) {
    const texts = translations[lang];
    if (!texts) return;

    // Update elements with data-lang-key attribute
    document.querySelectorAll('[data-lang-key]').forEach(el => {
        const key = el.getAttribute('data-lang-key');
        if (texts[key]) {
            // Special handling for elements containing icons or special formatting
            if (el.tagName === 'BUTTON' || el.tagName === 'SPAN' || el.tagName === 'STRONG') {
                // If it contains an icon (like üè†), preserve the icon and update the text part
                const iconMatch = el.innerHTML.match(/[\uD800-\uDBFF\uDC00-\uDFFF\u2600-\u26FF\u2700-\u27BF]*/);
                const icon = iconMatch ? iconMatch[0] : '';
                el.innerHTML = icon + (icon ? ' ' : '') + texts[key].replace(/[\uD800-\uDBFF\uDC00-\uDFFF\u2600-\u26FF\u2700-\u27BF]*/, '').trim();
            } else {
                el.innerText = texts[key];
            }
        }
    });

    // Update placeholders
    document.getElementById('searchBar').placeholder = texts.search_placeholder;
    
    // Update dynamic product details if the product detail view is open
    const currentSection = document.querySelector('.section[style*="block"], #categories[style*="block"]');
    if (currentSection && currentSection.id === 'product-detail') {
        // Re-call showProductDetail with the current product ID to refresh the text
        const currentProductId = document.getElementById('product-detail').dataset.productId;
        if (currentProductId) {
            showProductDetail(currentProductId);
        }
    }
    
    // Update product card names visible in the categories (handicrafts/textiles)
    document.querySelectorAll('[data-lang-product-key]').forEach(el => {
        const key = el.getAttribute('data-lang-product-key');
        if (texts[key]) {
            el.innerText = texts[key];
        }
    });
}

function changeLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('currentLang', lang);
    updateContent(lang);
    
    let alertMessage = '';
    if (lang === 'hi') {
        alertMessage = '‡§≠‡§æ‡§∑‡§æ ‡§¨‡§¶‡§≤‡§ï‡§∞ ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§ï‡§∞ ‡§¶‡•Ä ‡§ó‡§à ‡§π‡•à‡•§';
    } else if (lang === 'mr') {
        alertMessage = '‡§≠‡§æ‡§∑‡§æ ‡§Æ‡§∞‡§æ‡§†‡•Ä‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§¨‡§¶‡§≤‡§≤‡•Ä ‡§Ü‡§π‡•á.';
    } else {
        alertMessage = 'Language changed to English.';
    }
    alert(alertMessage);
}

// =========================================================================
// MODIFIED EXISTING JAVASCRIPT
// =========================================================================

let lastSection = 'categories';

// Load users from localStorage or initialize
let users = JSON.parse(localStorage.getItem('users')) || [];

// The product object remains in English for the core data, but we'll use translations for display
const products = {
  pottery: {id:'pottery', name:"Terracotta Handmade Pottery", img:"https://raw.githubusercontent.com/AshmitPatil94/Image/refs/heads/main/pottery.jpg", price:"‚Çπ499", descriptionKey:"pottery_desc", providerKey:"pottery_provider", reviewsKey:"pottery_reviews", rating:4.5},
  vase: {id:'vase', name:"Clay Decorative Vase", img:"https://raw.githubusercontent.com/AshmitPatil94/Vase/refs/heads/main/vase.jpg", price:"‚Çπ699", descriptionKey:"vase_desc", providerKey:"vase_provider", reviewsKey:"vase_reviews", rating:4},
  shawl: {id:'shawl', name:"Handmade Woolen Shawl", img:"https://raw.githubusercontent.com/AshmitPatil94/Woolen-Shawl/refs/heads/main/woolenshawl.jpg", price:"‚Çπ999", descriptionKey:"shawl_desc", providerKey:"shawl_provider", reviewsKey:"shawl_reviews", rating:4.8},
  kurta: {id:'kurta', name:"Cotton Printed Kurta", img:"https://raw.githubusercontent.com/AshmitPatil94/Cottenkurta/refs/heads/main/cottenprintedkurta.jpg", price:"‚Çπ699", descriptionKey:"kurta_desc", providerKey:"kurta_provider", reviewsKey:"kurta_reviews", rating:4.2}
};

function showSection(sectionId){
  document.querySelectorAll('.section, #categories').forEach(el=>el.style.display='none');
  document.getElementById(sectionId).style.display='block';
  lastSection = sectionId;
}

function showProductDetail(id){
  const p=products[id];
  const t = translations[currentLang]; // Get current translations
  
  document.getElementById('product-detail').dataset.productId = id; // Store current product ID
  
  // Update with translated text from keys
  document.getElementById('detail-name').innerText = t[`${id}_name`] || p.name;
  document.getElementById('detail-img').src=p.img;
  // Note: We use the strong tag's inner content to hold the price/desc/provider label
  document.getElementById('detail-price').innerHTML=`<strong data-lang-key="price_label">${t.price_label || 'Price'}:</strong> ${p.price}`;
  document.getElementById('detail-description').innerHTML=`<strong data-lang-key="description_label">${t.description_label || 'Description'}:</strong> ${t[p.descriptionKey] || p.description}`;
  document.getElementById('detail-provider').innerHTML=`<strong data-lang-key="provider_label">${t.provider_label || 'Provider'}:</strong> ${t[p.providerKey] || p.provider}`;
  document.getElementById('detail-reviews').innerHTML=t[p.reviewsKey] || p.reviews; // Reviews are now fetched from translations
  document.getElementById('detail-rating').style.width=(p.rating/5*100)+"%";
  
  showSection('product-detail');
}

function goBack(){
  const currentSection = document.querySelector('.section[style*="block"], #categories[style*="block"]').id;
  if(currentSection === 'product-detail') {
    const nonDetailSections = ['categories', 'handicrafts', 'textiles', 'more', 'eco', 'art', 'organic', 'versionInfo'];
    const previousSection = nonDetailSections.includes(lastSection) ? lastSection : 'categories';
    showSection(previousSection);
  }
  else if(lastSection === 'versionInfo' || lastSection === 'eco' || lastSection === 'art' || lastSection === 'organic'){
    showSection('categories');
  }
  else {
    showSection(lastSection);
  }
}

// Pre-login modal
function skipLogin(){document.getElementById('preLoginModal').style.display='none';showSection('categories');}
function showSignup(){document.getElementById('loginForm').style.display='none';document.getElementById('signupForm').style.display='block';}
function backToLogin(){document.getElementById('signupForm').style.display='none';document.getElementById('loginForm').style.display='block';}

// ‚úÖ Login with localStorage users
function login(){
  const e=document.getElementById('loginEmail').value.trim();
  const p=document.getElementById('loginPassword').value.trim();
  if(!e||!p){alert("Enter both fields");return;}
  const user = users.find(u => u.email === e && u.password === p);
  if(user){
    alert(`Logged in as ${e}`);
    document.getElementById('preLoginModal').style.display='none';
    showSection('categories');
  } else {
    alert("Invalid email or password");
  }
}
// ‚úÖ Signup and save to localStorage (Updated for translated alerts)
function signup(){
  const t = translations[currentLang];
  const e=document.getElementById('signupEmail').value.trim(),
        p=document.getElementById('signupPassword').value.trim(),
        cp=document.getElementById('signupConfirmPassword').value.trim();
  if(!e||!p||!cp){alert(t.alert_enter_fields || "Enter all fields");return;}
  if(p!==cp){alert(t.alert_passwords_mismatch || "Passwords do not match");return;}
  if(users.find(u => u.email === e)){alert(t.alert_email_exists || "Email already exists"); return;}
  users.push({email:e,password:p});
  localStorage.setItem('users', JSON.stringify(users));
  alert(`Signed up as ${e}`);
  document.getElementById('preLoginModal').style.display='none';
  showSection('categories');
}

// Search (Updated to use translated names for searching and display)
function searchProducts(){
  const q=document.getElementById('searchBar').value.toLowerCase();
  const res=document.getElementById('searchResults');res.innerHTML='';
  if(q===''){
    res.style.display = 'none';
    return;
  }
  res.style.display = 'flex';
  const t = translations[currentLang];
  
  Object.keys(products).forEach(id=>{
    const p=products[id];
    // Use translated name for display and searching
    const productName = t[`${id}_name`] || p.name;
    
    if(productName.toLowerCase().includes(q) || p.name.toLowerCase().includes(q)){
      const c=document.createElement('div');
      c.className='product-card';
      c.onclick=()=>showProductDetail(id);
      // Use translated name for the product card
      c.innerHTML=`<img src="${p.img}" alt="${productName}"><div class="product-name">${productName}</div><div class="product-price">${p.price}</div>`;
      res.appendChild(c);
    }
  });
}


// Sidebar toggle
function toggleSidebar(){document.getElementById('sidebar').classList.toggle('active');}

// ===== üåô Added Dark Mode Functions =====
function toggleSettings(){
  const panel=document.getElementById('settingsPanel');
  panel.style.display = panel.style.display==='block' ? 'none' : 'block';
}
function toggleDarkMode(){
  document.body.classList.toggle('dark-mode');
  const isDark=document.body.classList.contains('dark-mode');
  localStorage.setItem('darkMode',isDark);
}
window.onload=function(){
  // Load Dark Mode setting
  const savedDark=localStorage.getItem('darkMode');
  if(savedDark==='true'){
    document.body.classList.add('dark-mode');
    document.getElementById('darkModeToggle').checked=true;
  }
  
  // Load Language setting and update content
  const savedLang = localStorage.getItem('currentLang') || 'en';
  document.getElementById('languageSelect').value = savedLang;
  updateContent(savedLang);

};

// Initial display is handled by window.onload (which calls updateContent and keeps showSection('categories'))
// showSection('categories'); // Removed redundant call
</script>
<script>
// ========================================
// LOGIN, SIGNUP, AND SKIP FUNCTIONALITY
// ========================================

// Already declared above:
let users = JSON.parse(localStorage.getItem('users')) || [];
let currentUser = localStorage.getItem('currentUser') || null;

// Hide pre-login modal once user is logged in or skipped
function hidePreLoginModal() {
  document.getElementById('preLoginModal').style.display = 'none';
}

// Show pre-login modal again (e.g., after logout)
function showPreLoginModal() {
  document.getElementById('preLoginModal').style.display = 'block';
}

// ---------------- LOGIN ----------------
function login() {
  const email = document.getElementById('loginEmail').value.trim();
  const password = document.getElementById('loginPassword').value.trim();

  const t = translations[currentLang];
  
  if (!email || !password) {
    alert(t.alert_enter_fields);
    return;
  }

  const user = users.find(u => u.email === email && u.password === password);
  if (user) {
    currentUser = email;
    localStorage.setItem('currentUser', email);
    hidePreLoginModal();
  } else {
    alert(t.alert_invalid_login);
  }
}

// ---------------- SIGNUP ----------------
function showSignup() {
  document.getElementById('loginForm').style.display = 'none';
  document.getElementById('signupForm').style.display = 'block';
}

function backToLogin() {
  document.getElementById('signupForm').style.display = 'none';
  document.getElementById('loginForm').style.display = 'block';
}

function signup() {
  const email = document.getElementById('signupEmail').value.trim();
  const password = document.getElementById('signupPassword').value.trim();
  const confirmPassword = document.getElementById('signupConfirmPassword').value.trim();

  const t = translations[currentLang];
  
  if (!email || !password || !confirmPassword) {
    alert(t.alert_enter_fields);
    return;
  }

  if (password !== confirmPassword) {
    alert(t.alert_passwords_mismatch);
    return;
  }

  const userExists = users.some(u => u.email === email);
  if (userExists) {
    alert(t.alert_email_exists);
    return;
  }

  users.push({ email, password });
  localStorage.setItem('users', JSON.stringify(users));
  alert(t.signup_btn + " Successful!");
  backToLogin();
}

// ---------------- SKIP LOGIN ----------------
function skipLogin() {
  hidePreLoginModal();
}

// ---------------- LOGOUT ----------------
function logout() {
  const t = translations[currentLang];
  localStorage.removeItem('currentUser');
  currentUser = null;
  alert(t.alert_logged_out);
  showPreLoginModal();
}

// Auto-hide login modal if user is already logged in or skipped before
window.onload = function() {
  updateContent(currentLang);
  if (localStorage.getItem('currentUser')) {
    hidePreLoginModal();
  }
};

// Sidebar + settings toggles (keep working)
function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('active');
}
function toggleSettings() {
  const panel = document.getElementById('settingsPanel');
  panel.style.display = (panel.style.display === 'none' || panel.style.display === '') ? 'block' : 'none';
}
function toggleDarkMode() {
  document.body.classList.toggle('dark-mode');
  const darkEnabled = document.body.classList.contains('dark-mode');
  localStorage.setItem('darkMode', darkEnabled);
}

// Keep dark mode on reload
if (localStorage.getItem('darkMode') === 'true') {
  document.body.classList.add('dark-mode');
}
</script>
</body>
</html>